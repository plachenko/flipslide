var app=function(){"use strict";function t(){}function n(t){return t()}function e(){return Object.create(null)}function o(t){t.forEach(n)}function r(t){return"function"==typeof t}function i(t,n){return t!=t?n==n:t!==n||t&&"object"==typeof t||"function"==typeof t}function l(t,n){t.appendChild(n)}function c(t,n,e){t.insertBefore(n,e||null)}function s(t){t.parentNode.removeChild(t)}function u(t,n){for(let e=0;e<t.length;e+=1)t[e]&&t[e].d(n)}function a(t){return document.createElement(t)}function f(t){return document.createTextNode(t)}function d(){return f(" ")}function h(t,n,e,o){return t.addEventListener(n,e,o),()=>t.removeEventListener(n,e,o)}function g(t,n,e){null==e?t.removeAttribute(n):t.getAttribute(n)!==e&&t.setAttribute(n,e)}function p(t,n){t.value=null==n?"":n}let $;function m(t){$=t}function v(){if(!$)throw new Error("Function called outside component initialization");return $}function w(t){v().$$.on_mount.push(t)}function y(){const t=v();return(n,e)=>{const o=t.$$.callbacks[n];if(o){const r=function(t,n,e=!1){const o=document.createEvent("CustomEvent");return o.initCustomEvent(t,e,!1,n),o}(n,e);o.slice().forEach((n=>{n.call(t,r)}))}}}const b=[],x=[],E=[],k=[],S=Promise.resolve();let _=!1;function L(t){E.push(t)}let z=!1;const A=new Set;function C(){if(!z){z=!0;do{for(let t=0;t<b.length;t+=1){const n=b[t];m(n),M(n.$$)}for(m(null),b.length=0;x.length;)x.pop()();for(let t=0;t<E.length;t+=1){const n=E[t];A.has(n)||(A.add(n),n())}E.length=0}while(b.length);for(;k.length;)k.pop()();_=!1,z=!1,A.clear()}}function M(t){if(null!==t.fragment){t.update(),o(t.before_update);const n=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,n),t.after_update.forEach(L)}}const R=new Set;let F;function O(t,n){t&&t.i&&(R.delete(t),t.i(n))}function j(t,n,e,o){if(t&&t.o){if(R.has(t))return;R.add(t),F.c.push((()=>{R.delete(t),o&&(e&&t.d(1),o())})),t.o(n)}}function N(t){t&&t.c()}function B(t,e,i,l){const{fragment:c,on_mount:s,on_destroy:u,after_update:a}=t.$$;c&&c.m(e,i),l||L((()=>{const e=s.map(n).filter(r);u?u.push(...e):o(e),t.$$.on_mount=[]})),a.forEach(L)}function P(t,n){const e=t.$$;null!==e.fragment&&(o(e.on_destroy),e.fragment&&e.fragment.d(n),e.on_destroy=e.fragment=null,e.ctx=[])}function U(t,n){-1===t.$$.dirty[0]&&(b.push(t),_||(_=!0,S.then(C)),t.$$.dirty.fill(0)),t.$$.dirty[n/31|0]|=1<<n%31}function q(n,r,i,l,c,u,a,f=[-1]){const d=$;m(n);const h=n.$$={fragment:null,ctx:null,props:u,update:t,not_equal:c,bound:e(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(d?d.$$.context:r.context||[]),callbacks:e(),dirty:f,skip_bound:!1,root:r.target||d.$$.root};a&&a(h.root);let g=!1;if(h.ctx=i?i(n,r.props||{},((t,e,...o)=>{const r=o.length?o[0]:e;return h.ctx&&c(h.ctx[t],h.ctx[t]=r)&&(!h.skip_bound&&h.bound[t]&&h.bound[t](r),g&&U(n,t)),e})):[],h.update(),g=!0,o(h.before_update),h.fragment=!!l&&l(h.ctx),r.target){if(r.hydrate){const t=function(t){return Array.from(t.childNodes)}(r.target);h.fragment&&h.fragment.l(t),t.forEach(s)}else h.fragment&&h.fragment.c();r.intro&&O(n.$$.fragment),B(n,r.target,r.anchor,r.customElement),C()}m(d)}class D{$destroy(){P(this,1),this.$destroy=t}$on(t,n){const e=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return e.push(n),()=>{const t=e.indexOf(n);-1!==t&&e.splice(t,1)}}$set(t){var n;this.$$set&&(n=t,0!==Object.keys(n).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function H(n){let e;return{c(){e=a("canvas")},m(t,o){c(t,e,o),n[6](e)},p:t,i:t,o:t,d(t){t&&s(e),n[6](null)}}}function W(t,n,e){let o,r,i,{strokeArray:l=[]}=n,{iSize:c=10}=n,{color:s="#000"}=n,u=[];return w((()=>{e(0,o.width=window.innerWidth,o),e(0,o.height=window.innerHeight,o),r=o.getContext("2d"),r.fillStyle="#FFF",r.fillRect(0,0,o.width,o.height)})),t.$$set=t=>{"strokeArray"in t&&e(1,l=t.strokeArray),"iSize"in t&&e(2,c=t.iSize),"color"in t&&e(3,s=t.color)},[o,l,c,s,function(t){if(t){u=t[0];let n=t[t.length-1];!function(t,n,o=0,l=0,a=0){t||(t=u.x);n||(n=u.y);o&&Math.abs(o)>=Math.abs(l)?e(2,c=Math.abs(Math.round(o))):l&&Math.abs(l)>=Math.abs(o)?e(2,c=Math.abs(Math.round(l))):e(2,c=i);const f=3;i||(i=f);function d(t,n){const e=n*Math.round(t/n);return t-e<2?e:i}e(2,c=.6*c+10*a),e(2,c=d(c,f)),r.strokeStyle="#F00",n-=c/2,t=d(t-=c/2,f),n=d(n,f),r.fillStyle=c<i?"#F00":"#000";r.fillStyle=s,r.fillRect(t,n,c,c),i=c}(n.x,n.y,n.dx,n.dy,n.pressure)}},function(){e(1,l=[]),r.clearRect(0,0,o.width,o.height)},function(t){x[t?"unshift":"push"]((()=>{o=t,e(0,o)}))}]}class X extends D{constructor(t){super(),q(this,t,W,H,i,{strokeArray:1,iSize:2,color:3,drawStroke:4,clear:5})}get strokeArray(){return this.$$.ctx[1]}set strokeArray(t){this.$$set({strokeArray:t}),C()}get iSize(){return this.$$.ctx[2]}set iSize(t){this.$$set({iSize:t}),C()}get color(){return this.$$.ctx[3]}set color(t){this.$$set({color:t}),C()}get drawStroke(){return this.$$.ctx[4]}get clear(){return this.$$.ctx[5]}}function Y(n){let e;return{c(){e=a("div"),g(e,"id","capture"),g(e,"class","svelte-1f3d6cz")},m(t,o){c(t,e,o),n[1](e)},p:t,i:t,o:t,d(t){t&&s(e),n[1](null)}}}function I(t,n,e){let o,r=!1,i=[];w((()=>{o.addEventListener("pointermove",u),o.addEventListener("pointerdown",s),o.addEventListener("pointerup",a),o.addEventListener("contextmenu",(t=>{t.preventDefault()}))}));const l=y();function c(t){i.push({x:t.clientX,y:t.clientY,dx:t.movementX,dy:t.movementY,pressure:t.pressure}),l("pEvt",{aPosition:i})}function s(t){r=!0,c(t)}function u(t){r&&c(t)}function a(t){r=!1,i=[]}return[o,function(t){x[t?"unshift":"push"]((()=>{o=t,e(0,o)}))}]}class J extends D{constructor(t){super(),q(this,t,I,Y,i,{})}}function T(t,n,e){const o=t.slice();return o[10]=n[e],o}function G(t){let n,e,o,r,i,u,p=t[10].label+"";return{c(){n=a("div"),e=a("span"),o=f(p),r=d(),g(n,"class","btn svelte-gxh8ww")},m(s,a){c(s,n,a),l(n,e),l(e,o),l(n,r),i||(u=h(e,"click",t[10].method),i=!0)},p(n,e){t=n},d(t){t&&s(n),i=!1,u()}}}function K(n){let e,r,i,f,$,m,v,w,y=n[2],b=[];for(let t=0;t<y.length;t+=1)b[t]=G(T(n,y,t));return{c(){e=a("div"),r=a("div"),i=a("input"),f=d();for(let t=0;t<b.length;t+=1)b[t].c();$=d(),m=a("div"),m.textContent="flipslide",g(i,"class","btn svelte-gxh8ww"),g(i,"type","color"),g(r,"id","menu"),g(r,"class","svelte-gxh8ww"),g(m,"class","btn svelte-gxh8ww"),g(m,"id","logo"),g(e,"id","flipslide-logo"),g(e,"draggable","true"),g(e,"class","svelte-gxh8ww")},m(t,o){c(t,e,o),l(e,r),l(r,i),p(i,n[0]),l(r,f);for(let t=0;t<b.length;t+=1)b[t].m(r,null);l(e,$),l(e,m),n[5](e),v||(w=[h(i,"change",n[3]),h(i,"input",n[4])],v=!0)},p(t,[n]){if(1&n&&p(i,t[0]),4&n){let e;for(y=t[2],e=0;e<y.length;e+=1){const o=T(t,y,e);b[e]?b[e].p(o,n):(b[e]=G(o),b[e].c(),b[e].m(r,null))}for(;e<b.length;e+=1)b[e].d(1);b.length=y.length}},i:t,o:t,d(t){t&&s(e),u(b,t),n[5](null),v=!1,o(w)}}}function Q(t,n,e){const o=y();let r,i="#000",l=[{label:"save",type:"submit",method:function(){o("handleSave")}},{label:"clear",type:"submit",method:function(){o("handleClear")}}];function c(t=null,n=null){let o={x:window.innerWidth/2-r.getBoundingClientRect().width/2,y:window.innerHeight};n=n||o,e(1,r.style.left=`${n.x}px`,r)}return w((()=>{c(),window.addEventListener("resize",c),r.addEventListener("opointerdown",(t=>{console.log(t)})),r.addEventListener("ondragstart",(t=>{console.log(t)})),r.addEventListener("ondragged",(t=>{console.log(t)}))})),[i,r,l,function(t){console.log(i),o("handleColor",i)},function(){i=this.value,e(0,i)},function(t){x[t?"unshift":"push"]((()=>{r=t,e(1,r)}))}]}class V extends D{constructor(t){super(),q(this,t,Q,K,i,{})}}function Z(t,n,e){const o=t.slice();return o[14]=n[e],o[15]=n,o[16]=e,o}function tt(t){let n,e,o=t[15],r=t[16];const i=()=>t[6](n,o,r),l=()=>t[6](null,o,r);return n=new X({props:{}}),i(),{c(){N(n.$$.fragment)},m(t,o){B(n,t,o),e=!0},p(t,e){o===t[15]&&r===t[16]||(l(),o=t[15],r=t[16],i());n.$set({})},i(t){e||(O(n.$$.fragment,t),e=!0)},o(t){j(n.$$.fragment,t),e=!1},d(t){l(),P(n,t)}}}function nt(t){let n,e,r,i,f,h;e=new J({}),e.$on("pEvt",t[2]);let p=t[0],$=[];for(let n=0;n<p.length;n+=1)$[n]=tt(Z(t,p,n));const m=t=>j($[t],1,1,(()=>{$[t]=null}));return f=new V({props:{}}),t[7](f),f.$on("handleSave",t[5]),f.$on("handleClear",t[3]),f.$on("handleColor",t[4]),{c(){n=a("main"),N(e.$$.fragment),r=d();for(let t=0;t<$.length;t+=1)$[t].c();i=d(),N(f.$$.fragment),g(n,"class","svelte-lmktzq")},m(t,o){c(t,n,o),B(e,n,null),l(n,r);for(let t=0;t<$.length;t+=1)$[t].m(n,null);l(n,i),B(f,n,null),h=!0},p(t,[e]){if(1&e){let r;for(p=t[0],r=0;r<p.length;r+=1){const o=Z(t,p,r);$[r]?($[r].p(o,e),O($[r],1)):($[r]=tt(o),$[r].c(),O($[r],1),$[r].m(n,i))}for(F={r:0,c:[],p:F},r=p.length;r<$.length;r+=1)m(r);F.r||o(F.c),F=F.p}f.$set({})},i(t){if(!h){O(e.$$.fragment,t);for(let t=0;t<p.length;t+=1)O($[t]);O(f.$$.fragment,t),h=!0}},o(t){j(e.$$.fragment,t),$=$.filter(Boolean);for(let t=0;t<$.length;t+=1)j($[t]);j(f.$$.fragment,t),h=!1},d(o){o&&s(n),P(e),u($,o),t[7](null),P(f)}}}function et(t,n,e){let o,r=[null],i=[],l=localStorage.getItem("strokes");function c(t){i=[...i,t],r[0].drawStroke(t)}return w((()=>{l&&(i=JSON.parse(l||"[]"),i.forEach((t=>{c(t)})))})),[r,o,function(t){c(t.detail.aPosition)},function(t){console.log("clearing"),r[0].clear()},function(t){e(0,r[0].color=t.detail,r)},function(){const t=r[0].$$.ctx[0].toDataURL("image/png");let n;console.log("saving"),fetch(t).then((t=>t.blob())).then((t=>{n=URL.createObjectURL(t),window.open(n)}))},function(t,n,o){x[t?"unshift":"push"]((()=>{n[o]=t,e(0,r)}))},function(t){x[t?"unshift":"push"]((()=>{o=t,e(1,o)}))}]}return new class extends D{constructor(t){super(),q(this,t,et,nt,i,{})}}({target:document.body,props:{}})}();
//# sourceMappingURL=bundle.js.map
