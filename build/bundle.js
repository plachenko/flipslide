var app=function(){"use strict";function t(){}function n(t){return t()}function e(){return Object.create(null)}function o(t){t.forEach(n)}function i(t){return"function"==typeof t}function r(t,n){return t!=t?n==n:t!==n||t&&"object"==typeof t||"function"==typeof t}function l(t,n){t.appendChild(n)}function s(t,n,e){t.insertBefore(n,e||null)}function c(t){t.parentNode.removeChild(t)}function u(t,n){for(let e=0;e<t.length;e+=1)t[e]&&t[e].d(n)}function d(t){return document.createElement(t)}function a(t){return document.createTextNode(t)}function f(){return a(" ")}function h(t,n,e,o){return t.addEventListener(n,e,o),()=>t.removeEventListener(n,e,o)}function p(t,n,e){null==e?t.removeAttribute(n):t.getAttribute(n)!==e&&t.setAttribute(n,e)}function $(t,n){t.value=null==n?"":n}let g;function v(t){g=t}function m(){if(!g)throw new Error("Function called outside component initialization");return g}function x(t){m().$$.on_mount.push(t)}function y(){const t=m();return(n,e)=>{const o=t.$$.callbacks[n];if(o){const i=function(t,n,e=!1){const o=document.createEvent("CustomEvent");return o.initCustomEvent(t,e,!1,n),o}(n,e);o.slice().forEach((n=>{n.call(t,i)}))}}}function w(t,n){const e=t.$$.callbacks[n.type];e&&e.slice().forEach((t=>t.call(this,n)))}const b=[],k=[],E=[],_=[],P=Promise.resolve();let S=!1;function z(t){E.push(t)}let A=!1;const T=new Set;function C(){if(!A){A=!0;do{for(let t=0;t<b.length;t+=1){const n=b[t];v(n),L(n.$$)}for(v(null),b.length=0;k.length;)k.pop()();for(let t=0;t<E.length;t+=1){const n=E[t];T.has(n)||(T.add(n),n())}E.length=0}while(b.length);for(;_.length;)_.pop()();S=!1,A=!1,T.clear()}}function L(t){if(null!==t.fragment){t.update(),o(t.before_update);const n=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,n),t.after_update.forEach(z)}}const j=new Set;let B;function D(t,n){t&&t.i&&(j.delete(t),t.i(n))}function N(t,n,e,o){if(t&&t.o){if(j.has(t))return;j.add(t),B.c.push((()=>{j.delete(t),o&&(e&&t.d(1),o())})),t.o(n)}}function O(t){t&&t.c()}function q(t,e,r,l){const{fragment:s,on_mount:c,on_destroy:u,after_update:d}=t.$$;s&&s.m(e,r),l||z((()=>{const e=c.map(n).filter(i);u?u.push(...e):o(e),t.$$.on_mount=[]})),d.forEach(z)}function H(t,n){const e=t.$$;null!==e.fragment&&(o(e.on_destroy),e.fragment&&e.fragment.d(n),e.on_destroy=e.fragment=null,e.ctx=[])}function M(t,n){-1===t.$$.dirty[0]&&(b.push(t),S||(S=!0,P.then(C)),t.$$.dirty.fill(0)),t.$$.dirty[n/31|0]|=1<<n%31}function R(n,i,r,l,s,u,d,a=[-1]){const f=g;v(n);const h=n.$$={fragment:null,ctx:null,props:u,update:t,not_equal:s,bound:e(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(f?f.$$.context:i.context||[]),callbacks:e(),dirty:a,skip_bound:!1,root:i.target||f.$$.root};d&&d(h.root);let p=!1;if(h.ctx=r?r(n,i.props||{},((t,e,...o)=>{const i=o.length?o[0]:e;return h.ctx&&s(h.ctx[t],h.ctx[t]=i)&&(!h.skip_bound&&h.bound[t]&&h.bound[t](i),p&&M(n,t)),e})):[],h.update(),p=!0,o(h.before_update),h.fragment=!!l&&l(h.ctx),i.target){if(i.hydrate){const t=function(t){return Array.from(t.childNodes)}(i.target);h.fragment&&h.fragment.l(t),t.forEach(c)}else h.fragment&&h.fragment.c();i.intro&&D(n.$$.fragment),q(n,i.target,i.anchor,i.customElement),C()}v(f)}class W{$destroy(){H(this,1),this.$destroy=t}$on(t,n){const e=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return e.push(n),()=>{const t=e.indexOf(n);-1!==t&&e.splice(t,1)}}$set(t){var n;this.$$set&&(n=t,0!==Object.keys(n).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}class X{position=[];size=1;dx=0;dy=0;pressure=1;angle=0;constructor(...t){this.position=[...t],this.x=t[0],this.y=t[1]}offset(t){t[0]=this.x+t[0],t[1]=this.y+t[1];let n=new X(t);return n.dx=this.dx,n.dy=this.dy,n.pressure=this.pressure,n}distance(t){this.x,t.x,this.y,t.y}snap(t,n){const e=n*Math.round(t/n);return t-e<2?e:lSize}}function Y(n){let e;return{c(){e=d("canvas")},m(t,o){s(t,e,o),n[9](e)},p:t,i:t,o:t,d(t){t&&c(e),n[9](null)}}}function F(t,n=0){console.log("drawing.",n,t),n&&F(t,--n)}function G(t,n,e){let o,i,r,{strokeArray:l=[]}=n,{iSize:s=18}=n,{color:c="#000"}=n,{width:u=0}=n,{height:d=0}=n,{currentPoint:a=null}=n,f=[],h=[];function p(){var t,n,e,o,l,c,u,d,h,p,g,v,m,x,y,w;$();let b=new X(a.x+s/2,a.y+s/2);b.dy=a.dy,b.dx=a.dx,b.size=a.size,b.pressure=a.pressure,r||(r=b),i.beginPath(),i.moveTo(null===(t=f[0])||void 0===t?void 0:t.x,null===(n=f[0])||void 0===n?void 0:n.y),i.lineTo(r.x,r.y),i.closePath(),i.stroke(),null===(e=f[0])||void 0===e||e.x,null===(o=f[0])||void 0===o||o.y,f[0]&&(f[0],setAngleProps(null===(l=f[0])||void 0===l?void 0:l.x,r.x).hyp,i.stroke()),i.beginPath(),i.moveTo(null===(c=f[0])||void 0===c?void 0:c.x,null===(u=f[0])||void 0===u?void 0:u.y),i.lineTo(a.x,null===(d=f[0])||void 0===d?void 0:d.y),i.lineTo(a.x,a.y),i.closePath(),i.stroke(),i.beginPath(),i.moveTo(null===(h=f[0])||void 0===h?void 0:h.x,(null===(p=f[0])||void 0===p?void 0:p.y)+s/2),i.lineTo((null===(g=f[0])||void 0===g?void 0:g.x)+s/2,null===(v=f[0])||void 0===v?void 0:v.y),i.lineTo(null===(m=f[0])||void 0===m?void 0:m.x,(null===(x=f[0])||void 0===x?void 0:x.y)-s/2),i.lineTo((null===(y=f[0])||void 0===y?void 0:y.x)-s/2,null===(w=f[0])||void 0===w?void 0:w.y),i.closePath(),i.stroke(),i.beginPath(),i.closePath(),i.stroke(),f.push(a),r=a}function $(){e(1,l=[]),i.clearRect(0,0,o.width,o.height)}return x((()=>{!function(t=window.innerWidth,n=window.innerHeight){e(0,o.width=t,o),e(0,o.height=n,o),i=o.getContext("2d")}(),F(new X(100,100))})),t.$$set=t=>{"strokeArray"in t&&e(1,l=t.strokeArray),"iSize"in t&&e(2,s=t.iSize),"color"in t&&e(3,c=t.color),"width"in t&&e(4,u=t.width),"height"in t&&e(5,d=t.height),"currentPoint"in t&&e(6,a=t.currentPoint)},t.$$.update=()=>{64&t.$$.dirty&&a&&p()},[o,l,s,c,u,d,a,function(){h[0]||(h[0]=[]),h[0].push(f),r=null,f=[]},$,function(t){k[t?"unshift":"push"]((()=>{o=t,e(0,o)}))}]}class I extends W{constructor(t){super(),R(this,t,G,Y,r,{strokeArray:1,iSize:2,color:3,width:4,height:5,currentPoint:6,endStroke:7,clear:8})}get strokeArray(){return this.$$.ctx[1]}set strokeArray(t){this.$$set({strokeArray:t}),C()}get iSize(){return this.$$.ctx[2]}set iSize(t){this.$$set({iSize:t}),C()}get color(){return this.$$.ctx[3]}set color(t){this.$$set({color:t}),C()}get width(){return this.$$.ctx[4]}set width(t){this.$$set({width:t}),C()}get height(){return this.$$.ctx[5]}set height(t){this.$$set({height:t}),C()}get currentPoint(){return this.$$.ctx[6]}set currentPoint(t){this.$$set({currentPoint:t}),C()}get endStroke(){return this.$$.ctx[7]}get clear(){return this.$$.ctx[8]}}function J(n){let e,i,r;return{c(){e=d("div"),p(e,"id","capture"),p(e,"class","svelte-1f3d6cz")},m(t,o){var l;s(t,e,o),n[3](e),i||(r=[h(e,"contextmenu",(l=n[2],function(t){return t.preventDefault(),l.call(this,t)})),h(e,"pointermove",n[1]),h(e,"pointerdown",n[1]),h(e,"pointerup",n[1])],i=!0)},p:t,i:t,o:t,d(t){t&&c(e),n[3](null),i=!1,o(r)}}}function K(t,n,e){let o,i=!1;const r=y();return[o,function(t){const n=new X(t.clientX,t.clientY);t.pressure?(i||(i=!0,r("capStart")),n.pressure=t.pressure,n.dx=t.movementX,n.dy=t.movementY,r("capEvt",n)):(i&&(r("capDone"),i=!1),r("mvEvt",n))},function(n){w.call(this,t,n)},function(t){k[t?"unshift":"push"]((()=>{o=t,e(0,o)}))}]}class Q extends W{constructor(t){super(),R(this,t,K,J,r,{})}}function U(t,n,e){const o=t.slice();return o[10]=n[e],o}function V(t){let n,e,o,i,r,u,$=t[10].label+"";return{c(){n=d("div"),e=d("span"),o=a($),i=f(),p(n,"class","btn svelte-gxh8ww")},m(c,d){s(c,n,d),l(n,e),l(e,o),l(n,i),r||(u=h(e,"click",t[10].method),r=!0)},p(n,e){t=n},d(t){t&&c(n),r=!1,u()}}}function Z(n){let e,i,r,a,g,v,m,x,y=n[2],w=[];for(let t=0;t<y.length;t+=1)w[t]=V(U(n,y,t));return{c(){e=d("div"),i=d("div"),r=d("input"),a=f();for(let t=0;t<w.length;t+=1)w[t].c();g=f(),v=d("div"),v.textContent="flipslide",p(r,"class","btn svelte-gxh8ww"),p(r,"type","color"),p(i,"id","menu"),p(i,"class","svelte-gxh8ww"),p(v,"class","btn svelte-gxh8ww"),p(v,"id","logo"),p(e,"id","flipslide-logo"),p(e,"draggable","true"),p(e,"class","svelte-gxh8ww")},m(t,o){s(t,e,o),l(e,i),l(i,r),$(r,n[0]),l(i,a);for(let t=0;t<w.length;t+=1)w[t].m(i,null);l(e,g),l(e,v),n[5](e),m||(x=[h(r,"change",n[3]),h(r,"input",n[4])],m=!0)},p(t,[n]){if(1&n&&$(r,t[0]),4&n){let e;for(y=t[2],e=0;e<y.length;e+=1){const o=U(t,y,e);w[e]?w[e].p(o,n):(w[e]=V(o),w[e].c(),w[e].m(i,null))}for(;e<w.length;e+=1)w[e].d(1);w.length=y.length}},i:t,o:t,d(t){t&&c(e),u(w,t),n[5](null),m=!1,o(x)}}}function tt(t,n,e){const o=y();let i,r="#000",l=[{label:"save",type:"submit",method:function(){o("handleSave")}},{label:"clear",type:"submit",method:function(){o("handleClear")}}];function s(t=null,n=null){let o={x:window.innerWidth/2-i.getBoundingClientRect().width/2,y:window.innerHeight};n=n||o,e(1,i.style.left=`${n.x}px`,i)}return x((()=>{s(),window.addEventListener("resize",s),i.addEventListener("opointerdown",(t=>{console.log(t)})),i.addEventListener("ondragstart",(t=>{console.log(t)})),i.addEventListener("ondragged",(t=>{console.log(t)}))})),[r,i,l,function(t){o("menuEvt",r)},function(){r=this.value,e(0,r)},function(t){k[t?"unshift":"push"]((()=>{i=t,e(1,i)}))}]}class nt extends W{constructor(t){super(),R(this,t,tt,Z,r,{})}}function et(t,n,e){const o=t.slice();return o[7]=n[e],o[8]=n,o[9]=e,o}function ot(t){let n,e,o=t[8],i=t[9];const r=()=>t[5](n,o,i),l=()=>t[5](null,o,i);return n=new I({props:{}}),r(),{c(){O(n.$$.fragment)},m(t,o){q(n,t,o),e=!0},p(t,e){o===t[8]&&i===t[9]||(l(),o=t[8],i=t[9],r());n.$set({})},i(t){e||(D(n.$$.fragment,t),e=!0)},o(t){N(n.$$.fragment,t),e=!1},d(t){l(),H(n,t)}}}function it(t){let n,e,i,r,a,h;e=new Q({}),e.$on("capEvt",t[3]),e.$on("mvEvt",lt),e.$on("capStart",rt),e.$on("capDone",t[4]);let $=t[1],g=[];for(let n=0;n<$.length;n+=1)g[n]=ot(et(t,$,n));const v=t=>N(g[t],1,1,(()=>{g[t]=null}));return a=new nt({props:{}}),t[6](a),a.$on("menuEvt",t[2]),{c(){n=d("main"),O(e.$$.fragment),i=f();for(let t=0;t<g.length;t+=1)g[t].c();r=f(),O(a.$$.fragment),p(n,"class","svelte-lmktzq")},m(t,o){s(t,n,o),q(e,n,null),l(n,i);for(let t=0;t<g.length;t+=1)g[t].m(n,null);l(n,r),q(a,n,null),h=!0},p(t,[e]){if(2&e){let i;for($=t[1],i=0;i<$.length;i+=1){const o=et(t,$,i);g[i]?(g[i].p(o,e),D(g[i],1)):(g[i]=ot(o),g[i].c(),D(g[i],1),g[i].m(n,r))}for(B={r:0,c:[],p:B},i=$.length;i<g.length;i+=1)v(i);B.r||o(B.c),B=B.p}a.$set({})},i(t){if(!h){D(e.$$.fragment,t);for(let t=0;t<$.length;t+=1)D(g[t]);D(a.$$.fragment,t),h=!0}},o(t){N(e.$$.fragment,t),g=g.filter(Boolean);for(let t=0;t<g.length;t+=1)N(g[t]);N(a.$$.fragment,t),h=!1},d(o){o&&c(n),H(e),u(g,o),t[6](null),H(a)}}}function rt(){}function lt(t){}function st(t,n,e){let o,i=[null];return[o,i,function(t){const n=t.detail;console.log(n),i[0].clear(),e(1,i[0].color=t.detail,i)},function(t){e(1,i[0].currentPoint=t.detail,i)},function(){i[0].endStroke()},function(t,n,o){k[t?"unshift":"push"]((()=>{n[o]=t,e(1,i)}))},function(t){k[t?"unshift":"push"]((()=>{o=t,e(0,o)}))}]}return new class extends W{constructor(t){super(),R(this,t,st,it,r,{})}}({target:document.body,props:{}})}();
//# sourceMappingURL=bundle.js.map
