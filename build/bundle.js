var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function r(t){t.forEach(e)}function o(t){return"function"==typeof t}function i(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function s(t,e){t.appendChild(e)}function c(t,e,n){t.insertBefore(e,n||null)}function l(t){t.parentNode.removeChild(t)}function u(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function a(t){return document.createElement(t)}function f(t){return document.createTextNode(t)}function h(){return f(" ")}function d(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function p(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function $(t,e){t.value=null==e?"":e}let g;function m(t){g=t}function x(){if(!g)throw new Error("Function called outside component initialization");return g}function y(t){x().$$.on_mount.push(t)}function w(){const t=x();return(e,n)=>{const r=t.$$.callbacks[e];if(r){const o=function(t,e,n=!1){const r=document.createEvent("CustomEvent");return r.initCustomEvent(t,n,!1,e),r}(e,n);r.slice().forEach((e=>{e.call(t,o)}))}}}function v(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach((t=>t.call(this,e)))}const b=[],k=[],E=[],S=[],_=Promise.resolve();let z=!1;function M(t){E.push(t)}let A=!1;const P=new Set;function C(){if(!A){A=!0;do{for(let t=0;t<b.length;t+=1){const e=b[t];m(e),L(e.$$)}for(m(null),b.length=0;k.length;)k.pop()();for(let t=0;t<E.length;t+=1){const e=E[t];P.has(e)||(P.add(e),e())}E.length=0}while(b.length);for(;S.length;)S.pop()();z=!1,A=!1,P.clear()}}function L(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(M)}}const j=new Set;let B;function D(t,e){t&&t.i&&(j.delete(t),t.i(e))}function N(t,e,n,r){if(t&&t.o){if(j.has(t))return;j.add(t),B.c.push((()=>{j.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}}function O(t){t&&t.c()}function R(t,n,i,s){const{fragment:c,on_mount:l,on_destroy:u,after_update:a}=t.$$;c&&c.m(n,i),s||M((()=>{const n=l.map(e).filter(o);u?u.push(...n):r(n),t.$$.on_mount=[]})),a.forEach(M)}function q(t,e){const n=t.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function H(t,e){-1===t.$$.dirty[0]&&(b.push(t),z||(z=!0,_.then(C)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function W(e,o,i,s,c,u,a,f=[-1]){const h=g;m(e);const d=e.$$={fragment:null,ctx:null,props:u,update:t,not_equal:c,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(h?h.$$.context:o.context||[]),callbacks:n(),dirty:f,skip_bound:!1,root:o.target||h.$$.root};a&&a(d.root);let p=!1;if(d.ctx=i?i(e,o.props||{},((t,n,...r)=>{const o=r.length?r[0]:n;return d.ctx&&c(d.ctx[t],d.ctx[t]=o)&&(!d.skip_bound&&d.bound[t]&&d.bound[t](o),p&&H(e,t)),n})):[],d.update(),p=!0,r(d.before_update),d.fragment=!!s&&s(d.ctx),o.target){if(o.hydrate){const t=function(t){return Array.from(t.childNodes)}(o.target);d.fragment&&d.fragment.l(t),t.forEach(l)}else d.fragment&&d.fragment.c();o.intro&&D(e.$$.fragment),R(e,o.target,o.anchor,o.customElement),C()}m(h)}class X{$destroy(){q(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}class Y{points=[];x=0;y=0;size=0;dx=0;dy=0;pressure=1;constructor(...t){this.points=[...t],this.x=t[0],this.y=t[1]}offset(t){t[0]=this.x+t[0],t[1]=this.y+t[1];let e=new Y(t);return e.dx=this.dx,e.dy=this.dy,e.pressure=this.pressure,e}distance(t){this.x,t.x,this.y,t.y}snap(t,e){const n=e*Math.round(t/e);return t-n<2?n:lSize}}function F(e){let n;return{c(){n=a("canvas")},m(t,r){c(t,n,r),e[10](n)},p:t,i:t,o:t,d(t){t&&l(n),e[10](null)}}}function T(t,e,n){return(1-n)*t+n*e}function G(t,e,n){let r,o,i,{strokeArray:s=[]}=e,{iSize:c=4}=e,{color:l="#000"}=e,{width:u=0}=e,{height:a=0}=e,{currentPoint:f=null}=e,h=[],d=[];function p(){let t=new Y(f.x+c/2,f.y+c/2);t.dy=f.dy,t.dx=f.dx,t.size=f.size,t.pressure=f.pressure,i||(i=t),h.push(t),o.fillStyle="#000",function(t,e){let n=0,r=e.x-t.x,i=e.y-t.y;n=Math.abs(r)>Math.abs(i)?Math.abs(r):Math.abs(i),o.fillStyle="rgba(0,0,0,.5)";for(let r=0;r<=n;r++){let o=T(t.x,e.x,r/n),i=T(t.y,e.y,r/n);const s=new Y(o,i);s.pressure=T(t.pressure,e.pressure,r/n),$(s)}o.fillStyle="#000"}(t,i),i=t}function $(t){let e=c,n=t.dx,r=t.dy;n&&Math.abs(n)>=Math.abs(r)?e=Math.abs(Math.round(n)):r&&Math.abs(r)>=Math.abs(n)&&(e=Math.abs(Math.round(r)));let i=t.x;i-=e/2;let s=t.y;s-=e/2,t.size=e+t.pressure,o.fillRect(i,s,t.size,t.size)}return y((()=>{n(0,r.width=u||window.innerWidth,r),n(0,r.height=a||window.innerHeight,r),o=r.getContext("2d")})),t.$$set=t=>{"strokeArray"in t&&n(1,s=t.strokeArray),"iSize"in t&&n(2,c=t.iSize),"color"in t&&n(3,l=t.color),"width"in t&&n(4,u=t.width),"height"in t&&n(5,a=t.height),"currentPoint"in t&&n(6,f=t.currentPoint)},t.$$.update=()=>{64&t.$$.dirty&&f&&p()},[r,s,c,l,u,a,f,function(){d[0]=[...h,d[0]],i=null,h=[]},function(t){if(t){fStroke=t[0];let e=t[t.length-1],n=new Y(e.x,e.y),r=new Y(e.dx,e.dy);draw(...n.points,...r.points,e.pressure),d[0]=t}},function(){n(1,s=[]),o.clearRect(0,0,r.width,r.height)},function(t){k[t?"unshift":"push"]((()=>{r=t,n(0,r)}))}]}class I extends X{constructor(t){super(),W(this,t,G,F,i,{strokeArray:1,iSize:2,color:3,width:4,height:5,currentPoint:6,endStroke:7,drawStroke:8,clear:9})}get strokeArray(){return this.$$.ctx[1]}set strokeArray(t){this.$$set({strokeArray:t}),C()}get iSize(){return this.$$.ctx[2]}set iSize(t){this.$$set({iSize:t}),C()}get color(){return this.$$.ctx[3]}set color(t){this.$$set({color:t}),C()}get width(){return this.$$.ctx[4]}set width(t){this.$$set({width:t}),C()}get height(){return this.$$.ctx[5]}set height(t){this.$$set({height:t}),C()}get currentPoint(){return this.$$.ctx[6]}set currentPoint(t){this.$$set({currentPoint:t}),C()}get endStroke(){return this.$$.ctx[7]}get drawStroke(){return this.$$.ctx[8]}get clear(){return this.$$.ctx[9]}}function J(e){let n,o,i;return{c(){n=a("div"),p(n,"id","capture"),p(n,"class","svelte-1f3d6cz")},m(t,r){var s;c(t,n,r),e[3](n),o||(i=[d(n,"contextmenu",(s=e[2],function(t){return t.preventDefault(),s.call(this,t)})),d(n,"pointermove",e[1]),d(n,"pointerdown",e[1]),d(n,"pointerup",e[1])],o=!0)},p:t,i:t,o:t,d(t){t&&l(n),e[3](null),o=!1,r(i)}}}function K(t,e,n){let r,o=!1;const i=w();return[r,function(t){const e=new Y(t.clientX,t.clientY);t.pressure?(o||(o=!0,i("capStart")),e.pressure=t.pressure,e.dx=t.movementX,e.dy=t.movementY,i("capEvt",e)):(o&&(i("capDone"),o=!1),i("mvEvt",e))},function(e){v.call(this,t,e)},function(t){k[t?"unshift":"push"]((()=>{r=t,n(0,r)}))}]}class Q extends X{constructor(t){super(),W(this,t,K,J,i,{})}}function U(t,e,n){const r=t.slice();return r[10]=e[n],r}function V(t){let e,n,r,o,i,u,$=t[10].label+"";return{c(){e=a("div"),n=a("span"),r=f($),o=h(),p(e,"class","btn svelte-gxh8ww")},m(l,a){c(l,e,a),s(e,n),s(n,r),s(e,o),i||(u=d(n,"click",t[10].method),i=!0)},p(e,n){t=e},d(t){t&&l(e),i=!1,u()}}}function Z(e){let n,o,i,f,g,m,x,y,w=e[2],v=[];for(let t=0;t<w.length;t+=1)v[t]=V(U(e,w,t));return{c(){n=a("div"),o=a("div"),i=a("input"),f=h();for(let t=0;t<v.length;t+=1)v[t].c();g=h(),m=a("div"),m.textContent="flipslide",p(i,"class","btn svelte-gxh8ww"),p(i,"type","color"),p(o,"id","menu"),p(o,"class","svelte-gxh8ww"),p(m,"class","btn svelte-gxh8ww"),p(m,"id","logo"),p(n,"id","flipslide-logo"),p(n,"draggable","true"),p(n,"class","svelte-gxh8ww")},m(t,r){c(t,n,r),s(n,o),s(o,i),$(i,e[0]),s(o,f);for(let t=0;t<v.length;t+=1)v[t].m(o,null);s(n,g),s(n,m),e[5](n),x||(y=[d(i,"change",e[3]),d(i,"input",e[4])],x=!0)},p(t,[e]){if(1&e&&$(i,t[0]),4&e){let n;for(w=t[2],n=0;n<w.length;n+=1){const r=U(t,w,n);v[n]?v[n].p(r,e):(v[n]=V(r),v[n].c(),v[n].m(o,null))}for(;n<v.length;n+=1)v[n].d(1);v.length=w.length}},i:t,o:t,d(t){t&&l(n),u(v,t),e[5](null),x=!1,r(y)}}}function tt(t,e,n){const r=w();let o,i="#000",s=[{label:"save",type:"submit",method:function(){r("handleSave")}},{label:"clear",type:"submit",method:function(){r("handleClear")}}];function c(t=null,e=null){let r={x:window.innerWidth/2-o.getBoundingClientRect().width/2,y:window.innerHeight};e=e||r,n(1,o.style.left=`${e.x}px`,o)}return y((()=>{c(),window.addEventListener("resize",c),o.addEventListener("opointerdown",(t=>{console.log(t)})),o.addEventListener("ondragstart",(t=>{console.log(t)})),o.addEventListener("ondragged",(t=>{console.log(t)}))})),[i,o,s,function(t){r("menuEvt",i)},function(){i=this.value,n(0,i)},function(t){k[t?"unshift":"push"]((()=>{o=t,n(1,o)}))}]}class et extends X{constructor(t){super(),W(this,t,tt,Z,i,{})}}function nt(t,e,n){const r=t.slice();return r[7]=e[n],r[8]=e,r[9]=n,r}function rt(t){let e,n,r=t[8],o=t[9];const i=()=>t[5](e,r,o),s=()=>t[5](null,r,o);return e=new I({props:{}}),i(),{c(){O(e.$$.fragment)},m(t,r){R(e,t,r),n=!0},p(t,n){r===t[8]&&o===t[9]||(s(),r=t[8],o=t[9],i());e.$set({})},i(t){n||(D(e.$$.fragment,t),n=!0)},o(t){N(e.$$.fragment,t),n=!1},d(t){s(),q(e,t)}}}function ot(t){let e,n,o,i,f,d;n=new Q({}),n.$on("capEvt",t[3]),n.$on("mvEvt",st),n.$on("capStart",it),n.$on("capDone",t[4]);let $=t[1],g=[];for(let e=0;e<$.length;e+=1)g[e]=rt(nt(t,$,e));const m=t=>N(g[t],1,1,(()=>{g[t]=null}));return f=new et({props:{}}),t[6](f),f.$on("menuEvt",t[2]),{c(){e=a("main"),O(n.$$.fragment),o=h();for(let t=0;t<g.length;t+=1)g[t].c();i=h(),O(f.$$.fragment),p(e,"class","svelte-lmktzq")},m(t,r){c(t,e,r),R(n,e,null),s(e,o);for(let t=0;t<g.length;t+=1)g[t].m(e,null);s(e,i),R(f,e,null),d=!0},p(t,[n]){if(2&n){let o;for($=t[1],o=0;o<$.length;o+=1){const r=nt(t,$,o);g[o]?(g[o].p(r,n),D(g[o],1)):(g[o]=rt(r),g[o].c(),D(g[o],1),g[o].m(e,i))}for(B={r:0,c:[],p:B},o=$.length;o<g.length;o+=1)m(o);B.r||r(B.c),B=B.p}f.$set({})},i(t){if(!d){D(n.$$.fragment,t);for(let t=0;t<$.length;t+=1)D(g[t]);D(f.$$.fragment,t),d=!0}},o(t){N(n.$$.fragment,t),g=g.filter(Boolean);for(let t=0;t<g.length;t+=1)N(g[t]);N(f.$$.fragment,t),d=!1},d(r){r&&l(e),q(n),u(g,r),t[6](null),q(f)}}}function it(){}function st(t){}function ct(t,e,n){let r,o=[null];return[r,o,function(t){const e=t.detail;console.log(e),o[0].clear(),n(1,o[0].color=t.detail,o)},function(t){n(1,o[0].currentPoint=t.detail,o)},function(){o[0].endStroke()},function(t,e,r){k[t?"unshift":"push"]((()=>{e[r]=t,n(1,o)}))},function(t){k[t?"unshift":"push"]((()=>{r=t,n(0,r)}))}]}return new class extends X{constructor(t){super(),W(this,t,ct,ot,i,{})}}({target:document.body,props:{}})}();
//# sourceMappingURL=bundle.js.map
