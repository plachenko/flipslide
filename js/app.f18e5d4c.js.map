{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.vue?7e02","webpack:///./src/components/FSEvent.vue?9d2a","webpack:///./src/components/FSCursor.vue?3946","webpack:///./src/components/_old/FS2DCanvas.vue?3950","webpack:///./src/components/_old/FSBase.vue?1eda","webpack:///./src/components/FSDebug.vue?8784","webpack:///./src/components/menu/FSMenu.vue?5881","webpack:///./src/App.vue?78cd","webpack:///./src/EventBus.ts","webpack:///./src/intern/_old/FSPoint.ts","webpack:///./src/intern/_old/FSObject.ts","webpack:///./src/components/FSDebug.vue?cadf","webpack:///./src/components/FSDebug.vue?85d3","webpack:///./src/components/FSDebug.vue?dbf0","webpack:///./src/components/FSDebug.vue?b8c6","webpack:///./src/components/FSEvent.vue?1c3e","webpack:///./src/components/FSEvent.vue?2cc4","webpack:///./src/components/FSEvent.vue?4996","webpack:///./src/components/FSEvent.vue?2c57","webpack:///./src/components/FSCursor.vue?e29c","webpack:///./src/components/FSCursor.vue?b467","webpack:///./src/components/FSCursor.vue?fb83","webpack:///./src/components/FSCursor.vue?c54a","webpack:///./src/components/canvas/FSCanvasWebGL.vue?ea8e","webpack:///./src/components/canvas/FSBaseCanvas.vue?0f24","webpack:///./src/components/FSBase.vue?26a6","webpack:///./src/components/FSBase.vue?31a6","webpack:///./src/components/FSBase.vue?6810","webpack:///./src/components/FSBase.vue?3668","webpack:///./src/components/canvas/FSBaseCanvas.vue","webpack:///./src/components/canvas/FSBaseCanvas.vue?4aa8","webpack:///./src/components/canvas/FSBaseCanvas.vue?2251","webpack:///./src/intern/shaders/BasicBrush.fs","webpack:///./src/intern/shaders/BasicBrush.vs","webpack:///./src/intern/glHelper.ts","webpack:///./src/components/canvas/FSCanvasWebGL.vue","webpack:///./src/components/canvas/FSCanvasWebGL.vue?773e","webpack:///./src/components/canvas/FSCanvasWebGL.vue?cd38","webpack:///./src/components/_old/FS2DCanvas.vue?5891","webpack:///./src/components/_old/FS2DCanvas.vue?6c25","webpack:///./src/components/_old/FS2DCanvas.vue?2a7e","webpack:///./src/components/_old/FS2DCanvas.vue?9101","webpack:///./src/components/menu/FSMenu.vue?c91b","webpack:///./src/components/_old/FSBase.vue?9e13","webpack:///./src/components/_old/FSBase.vue?ad6b","webpack:///./src/components/_old/FSBase.vue?8c2a","webpack:///./src/components/_old/FSBase.vue?3df4","webpack:///./src/components/menu/FSMenu.vue?3db6","webpack:///./src/components/menu/FSMenu.vue?7272","webpack:///./src/components/menu/FSMenu.vue?2aef","webpack:///./src/App.vue?ec60","webpack:///./src/App.vue?0ab4","webpack:///./src/App.vue?bff9","webpack:///./src/main.ts","webpack:///./src/components/FSBase.vue?af92"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","_vm","this","_h","$createElement","_c","_self","attrs","_e","ref","menu","menuOpen","on","clearLayer","saveIMG","staticRenderFns","EventBus","menuHover","touch","debug","x","y","Math","floor","setPoint","pt","FSPoint","scale","num","abs","ceil","PI","pts","ret","run","rise","slopeX","slopeY","max","time","dist","vel","hyp","sqrt","pow","obj","xy","wh","size","hidden","keys","forEach","pivot","_v","_s","pointerType","$on","e","$off","component","cap","$refs","capture","addEventListener","$emit","preventDefault","staticClass","_l","dis","idx","refInFor","can","pos","val","disp","style","left","top","cur","width","height","draw","moveCursor","offsetX","offsetY","type","pr","ctx","getContext","round","clearRect","fillRect","tempType","pressure","deep","m3","multiply","a","b","a00","a01","a02","a10","a11","a12","a20","a21","a22","b00","b01","b02","b10","b11","b12","b20","b21","b22","translation","tx","ty","rotation","scaling","sx","sy","identity","projection","translate","rotate","cos","sin","createShader","gl","source","shader","shaderSource","compileShader","success","getShaderParameter","COMPILE_STATUS","console","error","getShaderInfoLog","createProgram","vertexShader","fragmentShader","program","attachShader","linkProgram","getProgramParameter","LINK_STATUS","getProgramInfoLog","brushMax","bufferArr","color","g","lineBuffer","mult","md","lD","points","sPoints","fillStyle","innerWidth","innerHeight","alpha","el","point","setupGL","setGeometry","rgba","drawImage","p2","requestAnimationFrame","update","mDelta","movementX","movementY","vShader","VERTEX_SHADER","fShader","FRAGMENT_SHADER","col","getUniformLocation","getAttribLocation","matrix","pos2u","lastDist","buffer","createBuffer","bindBuffer","ARRAY_BUFFER","enableVertexAttribArray","vertexAttribPointer","FLOAT","vert","Float32Array","bufferData","STATIC_DRAW","amt","to","uniform4fv","viewport","canvas","useProgram","uniform1f","uniform2f","uniformMatrix3fv","drawArrays","TRIANGLE_STRIP","clear","COLOR_BUFFER_BIT","glDraw","eraser","pnts","id","p1","moveTo","lineTo","closePath","fill","document","which","default","background","passThrough","zIndex","directives","rawName","expression","$event","staticStyle","colorUpdate","model","callback","$$v","colors","FSObject","setPivot","$nextTick","ipt","snap","undefined","$el","offset","ept","min","locked","snapped","setWH","setXY","immediate","v","components","Sketch","img","renderCan","putImageData","fURL","url","toDataURL","fetch","then","res","blob","URL","createObjectURL","open","w","h","getImageData","setURL","render","FSDebug","FSEvent","FSCursor","FSCanvasWebGL","FS2DCanvas","FSMenu","FSBase","config","productionTip","$mount"],"mappings":"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","file":"js/app.f18e5d4c.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import mod from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FSEvent.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FSEvent.vue?vue&type=style&index=0&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FSCursor.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FSCursor.vue?vue&type=style&index=0&lang=css&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FS2DCanvas.vue?vue&type=style&index=0&id=55e64fdf&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FS2DCanvas.vue?vue&type=style&index=0&id=55e64fdf&scoped=true&lang=css&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FSBase.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FSBase.vue?vue&type=style&index=0&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FSDebug.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FSDebug.vue?vue&type=style&index=0&lang=css&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FSMenu.vue?vue&type=style&index=0&id=44c656fe&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FSMenu.vue?vue&type=style&index=0&id=44c656fe&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[(_vm.debug)?_c('FSDebug'):_vm._e(),_c('FSEvent'),_c('FSCursor'),_c('FSCanvasWebGL',{ref:\"canvas\"}),_c('FSMenu',{attrs:{\"FSObject\":_vm.menu,\"menuOpen\":_vm.menuOpen},on:{\"clear\":_vm.clearLayer,\"save\":_vm.saveIMG}}),_c('canvas',{ref:\"render\"})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import Vue from 'vue';\r\n\r\nconst EventBus = new Vue({\r\n  data: function(){\r\n    return{\r\n      menuHover: false,\r\n      touch: false,\r\n      debug: false\r\n    }\r\n  }\r\n});\r\n\r\nexport default EventBus;\r\n","export default class FSPoint {\r\n  public x = 0;\r\n  public y = 0;\r\n\r\n  constructor(x = 0, y = 0) {\r\n    this.x = x;\r\n    this.y = y;\r\n    // this.x = Math.floor(x);\r\n    // this.y = Math.floor(y);\r\n  }\r\n\r\n  public snap(s: number) {\r\n    const x = Math.floor(this.x / s) * s;\r\n    const y = Math.floor(this.y / s) * s;\r\n\r\n    this.setPoint(x, y);\r\n  }\r\n\r\n  public setPoint(x: number, y: number){\r\n    this.x = Math.floor(x);\r\n    this.y = Math.floor(y);\r\n  }\r\n\r\n  public offset(pt = new FSPoint(), scale = -1): FSPoint{\r\n    const x = this.x + (pt.x * scale);\r\n    const y = this.y + (pt.y * scale);\r\n\r\n    return new FSPoint(x, y);\r\n  }\r\n\r\n  public toDeg(num: number) {\r\n    return Math.abs(Math.ceil(num * (180 / Math.PI)));\r\n  }\r\n\r\n  public to(pt: FSPoint) {\r\n    const pts: FSPoint[] = [ this, pt ]\r\n    const ret = {\r\n      run: pts[1].x - pts[0].x,\r\n      rise: pts[1].y - pts[0].y,\r\n      slopeX: 1,\r\n      slopeY: 1,\r\n      max: 0,\r\n      time: 0,\r\n      dist: 0,\r\n      vel: 0,\r\n      hyp: 0\r\n    }\r\n\r\n    // ret.hyp = Math.hypot(ret.run, ret.rise);\r\n    ret.hyp = Math.sqrt(Math.pow(ret.run, 2) + Math.pow(ret.rise, 2));\r\n    ret.dist = Math.sqrt( Math.abs(ret.run) + Math.abs(ret.rise) );\r\n\r\n    if (Math.abs(ret.run) > Math.abs(ret.rise)) {\r\n      ret.max = ret.run;\r\n      ret.slopeX = 1;\r\n      ret.slopeY = ret.rise / ret.run;\r\n    } else {\r\n      ret.max = ret.rise;\r\n      ret.slopeX = ret.run / ret.rise;\r\n      ret.slopeY = 1;\r\n    }\r\n\r\n    return ret;\r\n\r\n  }\r\n}\r\n","import FSPoint from './FSPoint';\r\n\r\ninterface FSInterface {\r\n  img: ImageBitmap;\r\n  wh: FSPoint;\r\n  xy: FSPoint;\r\n  pivot: FSPoint;\r\n  pts: FSPoint[];\r\n  hidden: boolean;\r\n  size: number;\r\n}\r\n\r\nexport default class FSObject implements FSInterface {\r\n  public xy = new FSPoint();\r\n  public wh = new FSPoint(100, 100);\r\n  // public wh = new FSPoint(window.innerWidth, window.innerHeight);\r\n  public pivot!: FSPoint;\r\n  public size = 1;\r\n  public pts: FSPoint[] = [];\r\n  public hidden = false;\r\n  public img!: ImageBitmap;\r\n\r\n  constructor(obj: object = {}) {\r\n    Object.keys(this).forEach((key: string) => {\r\n      if (this[key] !== obj[key]) {\r\n        this[key] = obj[key] || this[key];\r\n      }\r\n    });\r\n\r\n    if (this.pivot == null) {\r\n      this.pivot = new FSPoint(this.wh.x / 2, this.wh.y / 2);\r\n    }\r\n  }\r\n\r\n  public snap(pt: FSPoint): FSPoint {\r\n    if (this.size) {\r\n      const x = (Math.floor(pt.x / this.size) * this.size);\r\n      const y = (Math.floor(pt.y / this.size) * this.size);\r\n\r\n      return new FSPoint(x,y);\r\n    } else {\r\n      return pt;\r\n    }\r\n  }\r\n\r\n  public setPivot(pt: FSPoint) {\r\n    this.pivot = pt;\r\n  }\r\n}\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"debug\"}},[_c('div',{attrs:{\"id\":\"type\"}},[_vm._v(_vm._s(_vm.pointerType))])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\r\nimport { Component, Vue } from 'vue-property-decorator';\r\nimport EventBus from '@/EventBus';\r\n\r\n@Component\r\nexport default class FSDebug extends Vue{\r\n  private pointerType = \"\";\r\n\r\n  mounted(){\r\n    EventBus.$on('pMv', (e: PointerEvent) => {\r\n      this.pointerType = e.pointerType;\r\n    })\r\n  }\r\n\r\n  destroyed(){\r\n    EventBus.$off('pMv');\r\n  }\r\n}\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FSDebug.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FSDebug.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./FSDebug.vue?vue&type=template&id=dc6bda1a&\"\nimport script from \"./FSDebug.vue?vue&type=script&lang=ts&\"\nexport * from \"./FSDebug.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./FSDebug.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"capture\",attrs:{\"id\":\"capture\"}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\r\nimport EventBus from '@/EventBus';\r\nimport { Component, Vue } from 'vue-property-decorator';\r\n\r\n@Component({})\r\nexport default class FSEvent extends Vue{\r\n  $refs!: {\r\n    capture: HTMLElement;\r\n  }\r\n\r\n  mounted(){\r\n    const cap = this.$refs.capture;\r\n\r\n    window.addEventListener('resize', e => EventBus.$emit('resize', e));\r\n\r\n    cap.addEventListener('pointerup', e => EventBus.$emit('pUp', e));\r\n    cap.addEventListener('pointerout', e => EventBus.$emit('pOut', e));\r\n    cap.addEventListener('pointerenter', e => EventBus.$emit('pIn', e));\r\n    cap.addEventListener('pointermove', e => EventBus.$emit('pMv', e));\r\n    cap.addEventListener('pointerdown', e => EventBus.$emit('pDn', e));\r\n\r\n    /*\r\n    if(EventBus.touch){\r\n      cap.addEventListener('touchstart', (e) => { EventBus.$emit('pUp', e); });\r\n      cap.addEventListener('touchmove', (e) => { EventBus.$emit('pMv', e); });\r\n      cap.addEventListener('touchend', (e) => { EventBus.$emit('pDn', e); });\r\n    } else {\r\n      cap.addEventListener('pointerup', e => EventBus.$emit('pUp', e));\r\n      cap.addEventListener('pointermove', e => EventBus.$emit('pMv', e));\r\n      cap.addEventListener('pointerdown', e => EventBus.$emit('pDn', e));\r\n    }\r\n    */\r\n\r\n    cap.addEventListener('dblclick', (e) => { EventBus.$emit('dbl', e); });\r\n    cap.addEventListener('contextmenu', (e) => { e.preventDefault(); EventBus.$emit('context', e); });\r\n  }\r\n}\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FSEvent.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FSEvent.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./FSEvent.vue?vue&type=template&id=463c71f5&\"\nimport script from \"./FSEvent.vue?vue&type=script&lang=ts&\"\nexport * from \"./FSEvent.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./FSEvent.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"cursorContainer\"},_vm._l((1),function(dis,idx){return _c('div',{key:idx,ref:\"disp\",refInFor:true,staticClass:\"cursorDisplay\"},_vm._l((1),function(can,idx){return _c('canvas',{key:idx,ref:\"cur\",refInFor:true})}),0)}),0)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport EventBus from '@/EventBus';\r\nimport { Component, Vue, Watch } from 'vue-property-decorator';\r\nimport FSPoint from '@/intern/_old/FSPoint';\r\n\r\n@Component\r\nexport default class FSCursor extends Vue{\r\n  $refs!: {\r\n    cur: HTMLCanvasElement[];\r\n    disp: HTMLElement[];\r\n  }\r\n\r\n  private pos = new FSPoint();\r\n  private type!: string;\r\n  private tempType!: string;\r\n\r\n  @Watch('pos', {deep: true})\r\n  onPosChange(val: FSPoint){\r\n    this.$refs.disp[0].style.left = val.x + \"px\";\r\n    this.$refs.disp[0].style.top = val.y + \"px\";\r\n  }\r\n\r\n  mounted(){\r\n\r\n    // For each canvas set the width and height\r\n    for(const cur of this.$refs.cur){\r\n      cur.width = 21;\r\n      cur.height = 21;\r\n    }\r\n\r\n    for(const disp of this.$refs.disp){\r\n      disp.style.height = 21 + \"px\";\r\n      disp.style.width = 21 + \"px\";\r\n    }\r\n\r\n    // TODO: Draw all cursors.\r\n    this.draw(0);\r\n    // this.draw(1);\r\n\r\n\r\n    /*\r\n    EventBus.$on('pDn', () =>{\r\n      // TODO: Replace this with property change based on cursor object.\r\n      this.$refs.disp[1].style.left = e.offsetX-10 + \"px\";\r\n      this.$refs.disp[1].style.top = e.offsetY -10 + \"px\";\r\n      this.draw(1, e.pressure);\r\n    });\r\n    */\r\n    EventBus.$on('pMv', this.moveCursor)\r\n    EventBus.$on('pOut', (e: PointerEvent) => {\r\n      this.$refs.disp[0].style.left = e.offsetX-10 + \"px\";\r\n      this.$refs.disp[0].style.top = e.offsetY -10 + \"px\";\r\n    });\r\n    EventBus.$on('pUp', (e: PointerEvent) => {\r\n      this.type = e.pointerType;\r\n    });\r\n  }\r\n\r\n  destroyed(){\r\n    EventBus.$off('pDn');\r\n    EventBus.$off('pUp');\r\n    EventBus.$off('pMv');\r\n  }\r\n\r\n  private draw(idx: number, pr = 0){\r\n    // TODO: draw pressure independently on seperate canvas rather than crosshair AND canvas\r\n    // TODO: customize shape\r\n    const can = this.$refs.cur[idx];\r\n    const ctx = can.getContext('2d') as CanvasRenderingContext2D;\r\n\r\n    const p = Math.round(pr * 4);\r\n    ctx.clearRect(0, 0, 20, 20);\r\n\r\n    ctx.fillRect(0, 10, 21, 1);\r\n    ctx.fillRect(10, 0, 1, 21);\r\n\r\n    ctx.clearRect(8 - p, 8 - p, 5 + p * 2, 5 + p * 2);\r\n    ctx.fillRect(10 - p, 10 - p, 1 + p * 2, 1 + p * 2);\r\n    // ctx.fillRect(10 - p, 10 - p, 1 + p * 2, 1 + p * 2);\r\n  }\r\n\r\n\r\n  private moveCursor(e: PointerEvent){\r\n\r\n    // Hack to prevent 'sticky' pointer ===\r\n    if(!this.type){\r\n      this.type = e.pointerType;\r\n    }\r\n\r\n    if(this.tempType != e.pointerType){\r\n      this.tempType = e.pointerType;\r\n    }else{\r\n      this.type = this.tempType;\r\n    }\r\n\r\n    if(e.pointerType === this.type){\r\n      this.pos = new FSPoint(e.offsetX - 10, e.offsetY - 10);\r\n    }\r\n    // =============================\r\n\r\n    // TODO: move this on pen up event and store pen properties on pen object.\r\n    if(e.pressure){\r\n      this.draw(0, e.pressure);\r\n    }else{\r\n      // this.$refs.disp[1].style.left = e.offsetX - 10 + \"px\";\r\n      // this.$refs.disp[1].style.top = e.offsetY - 10 + \"px\";\r\n    }\r\n  }\r\n\r\n}\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FSCursor.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FSCursor.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./FSCursor.vue?vue&type=template&id=779e9186&\"\nimport script from \"./FSCursor.vue?vue&type=script&lang=ts&\"\nexport * from \"./FSCursor.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./FSCursor.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',_vm._l((2),function(can,idx){return _c('canvas',{key:idx,ref:\"can\",refInFor:true})}),0)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div')}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"box\"})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\r\nimport { Component, Prop, Vue } from 'vue-property-decorator';\r\n\r\n@Component\r\nexport default class FSBase extends Vue {\r\n  mounted(){\r\n    //\r\n  }\r\n}\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FSBase.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FSBase.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./FSBase.vue?vue&type=template&id=36dad8c0&scoped=true&\"\nimport script from \"./FSBase.vue?vue&type=script&lang=ts&\"\nexport * from \"./FSBase.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./FSBase.vue?vue&type=style&index=0&id=36dad8c0&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"36dad8c0\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\r\nimport { Component, Prop, Vue } from 'vue-property-decorator';\r\nimport FSBase from '@/components/FSBase.vue';\r\n\r\n@Component\r\nexport default class FSBaseCanvas extends FSBase {\r\n  mounted(){\r\n    //\r\n  }\r\n}\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FSBaseCanvas.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FSBaseCanvas.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./FSBaseCanvas.vue?vue&type=template&id=6353a838&scoped=true&\"\nimport script from \"./FSBaseCanvas.vue?vue&type=script&lang=ts&\"\nexport * from \"./FSBaseCanvas.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6353a838\",\n  null\n  \n)\n\nexport default component.exports","export default \"#version 300 es\\r\\n\\r\\nprecision highp float;\\r\\n\\r\\nuniform vec4 v_color;\\r\\n\\r\\nout vec4 outColor;\\r\\n\\r\\nvoid main() {\\r\\n  outColor = v_color;\\r\\n}\\r\\n\";","export default \"#version 300 es\\r\\n\\r\\nin vec2 a_position;\\r\\n\\r\\nuniform vec2 u_lastPosition;\\r\\nuniform mat3 u_matrix;\\r\\nuniform float u_distance;\\r\\nuniform float u_lastDistance;\\r\\n\\r\\nvoid main() {\\r\\n  vec2 pos;\\r\\n  if(gl_VertexID == 0){\\r\\n    pos = a_position - u_distance;\\r\\n  }else if(gl_VertexID == 1){\\r\\n    pos = a_position + u_distance;\\r\\n  }else if(gl_VertexID == 2){\\r\\n    pos = u_lastPosition - u_lastDistance;\\r\\n  }else if(gl_VertexID == 3){\\r\\n    pos = u_lastPosition + u_lastDistance;\\r\\n  }\\r\\n\\r\\n  gl_Position = vec4((u_matrix * vec3(pos, 1)).xy, 0, 1);\\r\\n}\\r\\n\";","/*\r\n  A helper utility that does many gl boilerplate stuff.\r\n\r\n  - Shader compiler / Program Linker: https://webgl2fundamentals.org/webgl/lessons/webgl-boilerplate.html\r\n  - M3 object: https://webgl2fundamentals.org/webgl/lessons/webgl-2d-matrices.html\r\n*/\r\nexport const m3 = {\r\n  /**\r\n   * Multiplies two matricies together.\r\n   *\r\n   * @param {number[]} a first matrix.\r\n   * @param {number[]} b second matrix.\r\n   * @return {number[]} result matrix.\r\n   */\r\n  multiply: function(a: number[], b: number[]): number[] {\r\n    const a00 = a[0 * 3 + 0];\r\n    const a01 = a[0 * 3 + 1];\r\n    const a02 = a[0 * 3 + 2];\r\n    const a10 = a[1 * 3 + 0];\r\n    const a11 = a[1 * 3 + 1];\r\n    const a12 = a[1 * 3 + 2];\r\n    const a20 = a[2 * 3 + 0];\r\n    const a21 = a[2 * 3 + 1];\r\n    const a22 = a[2 * 3 + 2];\r\n    const b00 = b[0 * 3 + 0];\r\n    const b01 = b[0 * 3 + 1];\r\n    const b02 = b[0 * 3 + 2];\r\n    const b10 = b[1 * 3 + 0];\r\n    const b11 = b[1 * 3 + 1];\r\n    const b12 = b[1 * 3 + 2];\r\n    const b20 = b[2 * 3 + 0];\r\n    const b21 = b[2 * 3 + 1];\r\n    const b22 = b[2 * 3 + 2];\r\n\r\n    return [\r\n      b00 * a00 + b01 * a10 + b02 * a20,\r\n      b00 * a01 + b01 * a11 + b02 * a21,\r\n      b00 * a02 + b01 * a12 + b02 * a22,\r\n      b10 * a00 + b11 * a10 + b12 * a20,\r\n      b10 * a01 + b11 * a11 + b12 * a21,\r\n      b10 * a02 + b11 * a12 + b12 * a22,\r\n      b20 * a00 + b21 * a10 + b22 * a20,\r\n      b20 * a01 + b21 * a11 + b22 * a21,\r\n      b20 * a02 + b21 * a12 + b22 * a22,\r\n    ];\r\n  },\r\n\r\n  /**\r\n   * Creates translation matrix.\r\n   *\r\n   * @param {number} tx x translation.\r\n   * @param {number} ty y translation.\r\n   * @return {number[]} translation matrix.\r\n   */\r\n  translation: function(tx: number, ty: number): number[] {\r\n    return [\r\n      1, 0, 0,\r\n      0, 1, 0,\r\n      tx, ty, 1,\r\n    ];\r\n  },\r\n\r\n  /**\r\n   * Creates rotation matrix.\r\n   *\r\n   * @param {number} c cosine angle.\r\n   * @param {number} s sine angle.\r\n   * @return {number[]} rotation matrix.\r\n   */\r\n  rotation: function(c: number, s: number): number[] {\r\n    return [\r\n      c,-s, 0,\r\n      s, c, 0,\r\n      0, 0, 1,\r\n    ];\r\n  },\r\n\r\n  /**\r\n   * Creates scale matrix.\r\n   *\r\n   * @param {number} sx x scale.\r\n   * @param {number} sy y scale.\r\n   * @return {number[]} scale matrix.\r\n   */\r\n  scaling: function(sx: number, sy: number): number[] {\r\n    return [\r\n      sx, 0, 0,\r\n      0, sy, 0,\r\n      0, 0, 1,\r\n    ];\r\n  },\r\n\r\n  /**\r\n   * Creates matrix identity.\r\n   *\r\n   * @return {number[]} matrix.\r\n   */\r\n  identity: function (): number[] {\r\n    return [\r\n      1, 0, 0,\r\n      0, 1, 0,\r\n      0, 0, 1,\r\n    ];\r\n  },\r\n\r\n  /**\r\n   * Creates projection matrix.\r\n   *\r\n   * @param {number} width screen width.\r\n   * @param {number} height screen height.\r\n   * @return {number[]} projection matrix.\r\n   */\r\n  projection: function (width: number, height: number): number[] {\r\n    // Note: This matrix flips the Y axis so that 0 is at the top.\r\n    return [\r\n      2 / width, 0, 0,\r\n      0, -2 / height, 0,\r\n      -1, 1, 1,\r\n    ];\r\n  },\r\n\r\n  translate: function(m: number[], tx: number, ty: number): number[] {\r\n    return m3.multiply(m, m3.translation(tx, ty));\r\n  },\r\n\r\n  rotate: function(m: number[], cos: number, sin: number): number[] {\r\n    return m3.multiply(m, m3.rotation(cos, sin));\r\n  },\r\n\r\n  scale: function(m: number[], sx: number, sy: number): number[] {\r\n    return m3.multiply(m, m3.scaling(sx, sy));\r\n  },\r\n}\r\n\r\n/**\r\n * Creates and compiles a shader.\r\n *\r\n * @param {!WebGLRenderingContext} gl The WebGL Context.\r\n * @param {string} shaderSource The GLSL source code for the shader.\r\n * @param {number} shaderType The type of shader, VERTEX_SHADER or\r\n *     FRAGMENT_SHADER.\r\n * @return {!WebGLShader} The shader.\r\n */\r\nexport function createShader(gl: WebGL2RenderingContext, source: string, type: number): WebGLShader {\r\n  const shader = gl.createShader(type) as WebGLShader;\r\n  gl.shaderSource(shader, source);\r\n  gl.compileShader(shader);\r\n\r\n  const success = gl.getShaderParameter(shader, gl.COMPILE_STATUS);\r\n  if(!success){\r\n    console.error(gl.getShaderInfoLog(shader));\r\n  }\r\n\r\n  return shader;\r\n}\r\n\r\n/**\r\n * Creates a program from 2 shaders.\r\n *\r\n * @param {!WebGLRenderingContext) gl The WebGL context.\r\n * @param {!WebGLShader} vertexShader A vertex shader.\r\n * @param {!WebGLShader} fragmentShader A fragment shader.\r\n * @return {!WebGLProgram} A program.\r\n */\r\nexport function createProgram(gl: WebGL2RenderingContext, vertexShader: WebGLShader, fragmentShader: WebGLShader): WebGLProgram{\r\n  const program = gl.createProgram() as WebGLProgram;\r\n\r\n  gl.attachShader(program, vertexShader);\r\n  gl.attachShader(program, fragmentShader);\r\n  gl.linkProgram(program);\r\n\r\n  const success = gl.getProgramParameter(program, gl.LINK_STATUS);\r\n  if(!success){\r\n    console.error(gl.getProgramInfoLog(program));\r\n  }\r\n\r\n  return program;\r\n}\r\n","\n\n\n\n\n\n\r\nimport { Component, Prop } from 'vue-property-decorator';\r\nimport FSBaseCanvas from './FSBaseCanvas.vue'\r\nimport EventBus from '@/EventBus';\r\nimport FSPoint from '@/intern/_old/FSPoint';\r\n\r\nimport BasicFrag from '!!raw-loader!@/intern/shaders/BasicBrush.fs';\r\nimport BasicVert from '!!raw-loader!@/intern/shaders/BasicBrush.vs';\r\n\r\nimport * as glHelper from '@/intern/glHelper';\r\n\r\n@Component\r\nexport default class FSCanvasWebGL extends FSBaseCanvas {\r\n\r\n  $refs!: {\r\n    can: HTMLCanvasElement[];\r\n  };\r\n\r\n  public size = .6;\r\n  public brushMax = 10;\r\n\r\n  protected can!: HTMLCanvasElement;\r\n  private points!: FSPoint[];\r\n  private sPoints!: FSPoint[];\r\n  private bufferArr = [];\r\n  private pressure = 0;\r\n  private color = {r: 255, g: 0, b: 0, a: 1};\r\n  private lineBuffer = 9;\r\n  private mult = 1;\r\n\r\n  private point!: FSPoint;\r\n  private p2!: FSPoint | null;\r\n\r\n  private md = false;\r\n\r\n  private gl!: WebGL2RenderingContext;\r\n  private program!: WebGLProgram;\r\n  private col!: any;\r\n  private pos!: any;\r\n  private pos2!: any;\r\n  private matrix!: any;\r\n\r\n  private pos2u!: any;\r\n  private mDelta!: FSPoint;\r\n  private dist!: any;\r\n  private lD = 0;\r\n  private lastDist!: any;\r\n\r\n  mounted(){\r\n    this.points = [];\r\n    this.sPoints = [];\r\n\r\n    const ctx = this.$refs.can[0].getContext('2d');\r\n\r\n    ctx.fillStyle=\"#FFF\";\r\n    ctx.fillRect(0,0,window.innerWidth, window.innerHeight);\r\n\r\n    const gl = this.$refs.can[1].getContext('webgl2', {alpha: 1}) as WebGL2RenderingContext;\r\n    this.gl = gl;\r\n\r\n    this.$refs.can.forEach((el) => {\r\n      el.width = window.innerWidth;\r\n      el.height = window.innerHeight;\r\n    });\r\n\r\n    this.point = new FSPoint(window.innerWidth/2, window.innerHeight/2);\r\n\r\n    this.setupGL();\r\n    this.setGeometry();\r\n\r\n    EventBus.$on('colorUpdate', (e: any)=>{\r\n      this.color.r = e.rgba.r / 255;\r\n      this.color.g = e.rgba.g / 255;\r\n      this.color.b = e.rgba.b / 255;\r\n      this.color.a = e.rgba.a;\r\n    });\r\n\r\n    EventBus.$on('pOut', (e) => {\r\n      this.points.push(new FSPoint(e.offsetX, e.offsetY));\r\n      this.points = [];\r\n      this.point = null;\r\n    });\r\n\r\n    EventBus.$on('pUp', (e: PointerEvent) => {\r\n\r\n      this.draw();\r\n      const can = this.$refs.can[0].getContext('2d', {alpha: 0}) as CanvasRenderingContext2D;\r\n      can.drawImage(this.$refs.can[1], 0, 0);\r\n\r\n      this.point = new FSPoint(e.offsetX, e.offsetY);\r\n      this.points.push(new FSPoint(e.offsetX, e.offsetY));\r\n      this.md = false;\r\n      this.points = [];\r\n      this.p2 = null;\r\n    });\r\n\r\n    EventBus.$on('pDn', (e: PointerEvent) => {\r\n      this.points.push(new FSPoint(e.offsetX, e.offsetY));\r\n      this.point = new FSPoint(e.offsetX, e.offsetY);\r\n      this.md = true;\r\n\r\n      requestAnimationFrame(this.update);\r\n    });\r\n\r\n\r\n    EventBus.$on('pMv', (e: PointerEvent) => {\r\n      if(e.pressure){\r\n        this.point = new FSPoint(e.offsetX, e.offsetY);\r\n        this.mDelta = new FSPoint(e.movementX, e.movementY);\r\n        this.points.push(this.point);\r\n        this.pressure = e.pressure;\r\n      }\r\n    });\r\n  }\r\n\r\n  private update(){\r\n    if(this.md){\r\n      this.draw();\r\n      requestAnimationFrame(this.update);\r\n    }\r\n  }\r\n\r\n  private setupGL(){\r\n    const gl = this.gl;\r\n\r\n    const vShader = glHelper.createShader(gl, BasicVert, gl.VERTEX_SHADER);\r\n    const fShader = glHelper.createShader(gl, BasicFrag, gl.FRAGMENT_SHADER);\r\n    const program = glHelper.createProgram(gl, vShader, fShader);\r\n\r\n    this.col = gl.getUniformLocation(program, 'v_color');\r\n    const pos = gl.getAttribLocation(program, 'a_position');\r\n\r\n    this.matrix = gl.getUniformLocation(program, 'u_matrix');\r\n    this.pos2u = gl.getUniformLocation(program, 'u_lastPosition');\r\n    this.dist = gl.getUniformLocation(program, 'u_distance');\r\n    this.lastDist = gl.getUniformLocation(program, 'u_lastDistance');\r\n\r\n    this.program = program;\r\n\r\n    const buffer = gl.createBuffer();\r\n    gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\r\n    gl.enableVertexAttribArray(pos);\r\n    gl.vertexAttribPointer(pos, 2, gl.FLOAT, false, 0, 0);\r\n  }\r\n\r\n  private setGeometry(){\r\n    const gl = this.gl;\r\n\r\n    const vert = new Float32Array([\r\n      0, 0,\r\n      0, 0,\r\n      0, 0,\r\n      0, 0,\r\n    ]);\r\n\r\n    gl.bufferData(gl.ARRAY_BUFFER, vert, gl.STATIC_DRAW);\r\n  }\r\n\r\n  private glDraw(p, p2, size = this.size, color = this.color){\r\n\r\n    if(!p2){\r\n      p2 = p;\r\n    }\r\n\r\n    const gl = this.gl;\r\n    // const amt = ((this.pressure * size) / this.brushMax);\r\n    const amt = size;\r\n    const dist = p.to(p2).dist * amt;\r\n\r\n    let matrix = glHelper.m3.identity();\r\n\r\n    gl.uniform4fv(this.col, [\r\n      color.r,\r\n      color.g,\r\n      color.b,\r\n      color.a\r\n    ]);\r\n    gl.viewport(0, 0, gl.canvas.width, gl.canvas.height);\r\n    gl.useProgram(this.program);\r\n\r\n    gl.uniform1f(this.dist, dist);\r\n    gl.uniform1f(this.lastDist, this.lD);\r\n    gl.uniform2f(this.pos2u, p2.x - p.x, p2.y - p.y);\r\n\r\n    matrix = glHelper.m3.projection(gl.canvas.width, gl.canvas.height);\r\n    matrix = glHelper.m3.translate(matrix, p.x, p.y);\r\n\r\n    gl.uniformMatrix3fv(this.matrix, false, matrix);\r\n    gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\r\n    this.lD = dist;\r\n  }\r\n\r\n  public clear(){\r\n    const can = this.$refs.can[0];\r\n    can.getContext('2d').clearRect(0,0,window.innerWidth, window.innerHeight);\r\n  }\r\n\r\n  private draw(){\r\n    this.gl.clear(this.gl.COLOR_BUFFER_BIT);\r\n    const pts = this.points.slice(-7, -1);\r\n\r\n    if(pts.length > 1){\r\n      pts.forEach((el, idx) => {\r\n        this.glDraw(pts[idx], pts[idx-3]);\r\n      });\r\n    }\r\n\r\n    const can = this.$refs.can[0].getContext('2d') as CanvasRenderingContext2D;\r\n    can.drawImage(this.$refs.can[1], 0, 0);\r\n  }\r\n}\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FSCanvasWebGL.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FSCanvasWebGL.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./FSCanvasWebGL.vue?vue&type=template&id=10080d61&scoped=true&\"\nimport script from \"./FSCanvasWebGL.vue?vue&type=script&lang=ts&\"\nexport * from \"./FSCanvasWebGL.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"10080d61\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"canContainer\"}},_vm._l((2),function(can,idx){return _c('canvas',{key:idx,ref:\"can\",refInFor:true})}),0)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\r\nimport EventBus from '@/EventBus';\r\nimport FSPoint from '@/intern/_old/FSPoint';\r\n\r\n// eslint-disable-next-line\r\n// const OffWorker = require('worker-loader!@/workers/offscreen.worker.js');\r\n\r\nimport { Component, Prop, Vue, Watch } from 'vue-property-decorator';\r\n\r\n@Component({})\r\nexport default class FS2DCanvas extends Vue{\r\n  @Prop({default: () => { return null }}) color!: any;\r\n\r\n  $refs!: {\r\n    can: HTMLCanvasElement[];\r\n  }\r\n\r\n  private worker!: Worker;\r\n  private point: FSPoint | null = new FSPoint();\r\n  private pnts!: FSPoint[];\r\n  private offscreen!: any;\r\n  private pressure!: number;\r\n  private eraser = false;\r\n\r\n  private lineBuffer = 5;\r\n\r\n  @Watch('point', {deep: true})\r\n  private pointChange(n, o){\r\n    this.pnts.push(n);\r\n    if(n && o && this.pnts.length >= this.lineBuffer + 1){\r\n      this.draw(this.pnts.slice(-this.lineBuffer - 1, -1), 1);\r\n    }\r\n  }\r\n\r\n  destroyed(){\r\n    EventBus.$off('pIn');\r\n    EventBus.$off('pOut');\r\n    EventBus.$off('pUp');\r\n    EventBus.$off('pDn');\r\n    EventBus.$off('pMv');\r\n  }\r\n\r\n  private draw(pnts, id){\r\n    const ctx = this.$refs.can[1].getContext('2d') as CanvasRenderingContext2D;\r\n    if(this.color.rgba){\r\n      ctx.fillStyle = \"rgba(\" +\r\n        this.color.rgba.r + \",\" +\r\n        this.color.rgba.g + \",\" +\r\n        this.color.rgba.b + \",\" +\r\n        this.color.rgba.a + \")\";\r\n    }else{\r\n      ctx.fillStyle = \"#000\";\r\n    }\r\n\r\n    // console.log(pnts);\r\n\r\n    const p1 = new FSPoint(pnts[0].x, pnts[0].y);\r\n    const p2 = new FSPoint(pnts[pnts.length-1].x, pnts[pnts.length-1].y);\r\n    const amt = ((this.pressure * 8) / 7);\r\n    const dist = p1.to(p2).dist * amt;\r\n\r\n    // ctx.moveTo(p1.x, p1.y);\r\n    ctx.moveTo(p1.x + dist, p1.y + dist);\r\n    /*\r\n    for(let i = 0; i <= pnts.length-1; i++){\r\n      const p3 = new FSPoint(pnts[i].x, pnts[i].y);\r\n      ctx.lineTo(p3.x + dist , p3.y + dist );\r\n    }\r\n    */\r\n    ctx.lineTo(p2.x + dist, p2.y + dist);\r\n    ctx.lineTo(p2.x - dist, p2.y - dist);\r\n    /*\r\n    for(let i = 0; i <= pnts.length-1; i++){\r\n      const p3 = new FSPoint(pnts[i].x, pnts[i].y);\r\n      ctx.lineTo(p3.x - dist  , p3.y - dist );\r\n    }\r\n    */\r\n    ctx.lineTo(p1.x - dist, p1.y - dist);\r\n\r\n    ctx.closePath();\r\n    ctx.fill();\r\n\r\n    /*\r\n\r\n    if(this.eraser){\r\n      ctx.globalCompositeOperation = 'destination-out';\r\n    }else{\r\n      ctx.globalCompositeOperation = 'source-over';\r\n    }\r\n\r\n\r\n    */\r\n  }\r\n\r\n  private clear(idx: number){\r\n    const can = this.$refs.can[idx];\r\n    const ctx = can.getContext('2d') as CanvasRenderingContext2D;\r\n    ctx.clearRect(0, 0, can.width, can.height);\r\n  }\r\n\r\n  mounted(){\r\n    this.$refs.can.forEach(can => {\r\n      can.width = window.innerWidth;\r\n      can.height = window.innerHeight;\r\n    });\r\n\r\n    document.addEventListener('keyup', (e) => {\r\n      if(e.which == 82){\r\n        this.eraser = !this.eraser;\r\n      }\r\n    })\r\n\r\n    EventBus.$on('pIn', (e) => {\r\n      // this.pnts.push(new FSPoint(e.offsetX, e.offsetY));\r\n    });\r\n\r\n    EventBus.$on('pOut', (e) => {\r\n      this.pnts.push(new FSPoint(e.offsetX, e.offsetY));\r\n      this.pnts = [];\r\n      this.point = null;\r\n    });\r\n\r\n    EventBus.$on('pDn', (e) => {\r\n      this.pnts = [];\r\n      //\r\n    });\r\n\r\n    EventBus.$on('pUp', (e) => {\r\n      this.$refs.can[0].getContext('2d').drawImage(this.$refs.can[1], 0, 0);\r\n      this.clear(1);\r\n\r\n      this.pnts = [];\r\n      this.point = null;\r\n    });\r\n\r\n    EventBus.$on('pMv', (e) => {\r\n      if(e.pressure){\r\n        this.pressure = e.pressure;\r\n        this.point = new FSPoint(e.offsetX, e.offsetY);\r\n      }\r\n    });\r\n\r\n  }\r\n\r\n/*\r\n  private cans!: HTMLCanvasElement[];\r\n  private ctx!: CanvasRenderingContext2D;\r\n  private pts: FSPoint[] = [];\r\n  private stroke: FSPoint[] = [];\r\n  private strokes: FSPoint[][] = [];\r\n  private point = null;\r\n\r\n\r\n  private draw(idx, stroke = this.strokes[this.strokes.length-1]){\r\n    const can = this.$refs.can[idx];\r\n    const ctx = can.getContext('2d') as CanvasRenderingContext2D;\r\n\r\n    if(this.eraser){\r\n      ctx.globalCompositeOperation = 'destination-out';\r\n    }else{\r\n      ctx.globalCompositeOperation = 'source-over';\r\n    }\r\n\r\n    ctx.beginPath();\r\n    ctx.moveTo(stroke[0].x, stroke[0].y);\r\n    stroke.forEach(el => {\r\n      ctx.lineTo(el.x, el.y);\r\n    });\r\n    // ctx.fill();\r\n    // ctx.closePath();\r\n    ctx.stroke();\r\n  }\r\n\r\n  mounted(){\r\n\r\n    this.$nextTick(()=>{\r\n      for(const can of this.$refs.can){\r\n        can.width = this.wh.x;\r\n        can.height = this.wh.y;\r\n      }\r\n    });\r\n\r\n    EventBus.$on('pDn', (e)=>{\r\n      this.point = new FSPoint(e.offsetX, e.offsetY);\r\n      this.stroke.push(new FSPoint(e.offsetX, e.offsetY));\r\n    });\r\n\r\n*/\r\n        /*\r\n    EventBus.$on('pMv', (e)=>{\r\n      if(e.pressure && !EventBus.menuHover){\r\n        this.stroke.push(new FSPoint(e.offsetX, e.offsetY));\r\n        this.clear(0);\r\n        this.draw(this.eraser ? 1 : 0, this.stroke);\r\n       this.point = new FSPoint(e.offsetX, e.offsetY);\r\n      }\r\n    });\r\n        */\r\n\r\n/*\r\n    EventBus.$on('pUp', ()=>{\r\n      this.point = null;\r\n      this.lP = null;\r\n      this.strokes.push(this.stroke);\r\n      this.stroke = [];\r\n      // this.clear(0);\r\n      this.draw(1);\r\n    });\r\n  }\r\n*/\r\n}\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FS2DCanvas.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FS2DCanvas.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./FS2DCanvas.vue?vue&type=template&id=55e64fdf&scoped=true&\"\nimport script from \"./FS2DCanvas.vue?vue&type=script&lang=ts&\"\nexport * from \"./FS2DCanvas.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./FS2DCanvas.vue?vue&type=style&index=0&id=55e64fdf&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"55e64fdf\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"menu\",staticClass:\"box\",style:({background: _vm.passThrough ? 'none' : '#FFF', zIndex: (_vm.menuOpen && !_vm.passThrough) ? 9999 : 9993 })},[_c('span',{attrs:{\"id\":\"title\"}},[_vm._v(\"FlipSlide\")]),_c('div',{attrs:{\"id\":\"content\"}}),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.menuOpen),expression:\"menuOpen\"}],attrs:{\"id\":\"menu\"}},[_c('div',{on:{\"click\":function($event){return _vm.$emit('clear')}}},[_vm._v(\"Clear\")]),_c('div',{on:{\"click\":function($event){return _vm.$emit('save')}}},[_vm._v(\"Save\")])]),_c('Sketch',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.menuOpen),expression:\"menuOpen\"}],staticStyle:{\"width\":\"50%\",\"position\":\"absolute\",\"top\":\"0px\",\"right\":\"-200px\"},on:{\"input\":_vm.colorUpdate},model:{value:(_vm.colors),callback:function ($$v) {_vm.colors=$$v},expression:\"colors\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"box\"})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\r\nimport { Vue, Component, Prop, Watch } from 'vue-property-decorator';\r\n// import EventBus from '@/EventBus';\r\nimport FSObject from '@/intern/_old/FSObject';\r\nimport FSPoint from '@/intern/_old/FSPoint';\r\n\r\n@Component\r\nexport default class FSBase extends Vue {\r\n  $el!: HTMLElement;\r\n\r\n  @Prop ({ default: () =>  new FSObject() }) public FSObject !: FSObject;\r\n  @Prop ({ default: true }) public locked !: boolean;\r\n  @Prop ({ default: true }) public snapped !: boolean;\r\n\r\n  protected setPivot(pt) {\r\n    this.FSObject.setPivot(pt);\r\n  }\r\n\r\n  protected setWH(pt: FSPoint = new FSPoint()) {\r\n    this.$nextTick(function() {\r\n      const ipt = this.FSObject.snap(pt);\r\n      if (ipt !== undefined) {\r\n        const el = this.$el as HTMLElement;\r\n        el.style.width = ipt.x + 'px';\r\n        el.style.height = ipt.y + 'px';\r\n      }\r\n    });\r\n  }\r\n\r\n  protected setXY(pt: FSPoint = new FSPoint()) {\r\n    const ipt: FSPoint = pt.offset( this.FSObject.pivot, -1 );\r\n    let ept = new FSPoint();\r\n\r\n    const min = new FSPoint();\r\n    const max = new FSPoint(\r\n      window.innerWidth,\r\n      window.innerHeight\r\n    ).offset( this.FSObject.wh, -1 );\r\n\r\n    if (this.locked) {\r\n      if (ipt.y <= max.y && ipt.y >= min.y) {\r\n        ept.y = ipt.y;\r\n      } else {\r\n        ept.y = ipt.y >= min.y ? max.y : min.x;\r\n      }\r\n      if (ipt.x <= max.x && ipt.x >= min.x) {\r\n        ept.x = ipt.x;\r\n      } else {\r\n        ept.x = ipt.x >= min.x ? max.x : min.x;\r\n      }\r\n    } else {\r\n      // ept = this.FSObject.setXY(ipt);\r\n      ept = ipt;\r\n    }\r\n\r\n    if(this.snapped){\r\n      ept = this.FSObject.snap(ept);\r\n    }\r\n\r\n    this.$nextTick(function() {\r\n      const el = this.$el as HTMLElement;\r\n      el.style.top = ept.y + 'px';\r\n      el.style.left = ept.x + 'px';\r\n    });\r\n\r\n  }\r\n\r\n  mounted(){\r\n    this.$nextTick(() => {\r\n      this.setWH(this.FSObject.wh);\r\n    });\r\n  }\r\n\r\n  @Watch('FSObject', { immediate: true, deep: true })\r\n  protected fsUpdate(obj: FSObject) {\r\n    this.setXY(obj.xy);\r\n    this.setWH(obj.wh);\r\n    this.setPivot(obj.pivot);\r\n  }\r\n}\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FSBase.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FSBase.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./FSBase.vue?vue&type=template&id=8ebfe524&\"\nimport script from \"./FSBase.vue?vue&type=script&lang=ts&\"\nexport * from \"./FSBase.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./FSBase.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport { Component, Watch, Prop } from 'vue-property-decorator';\r\nimport EventBus from '@/EventBus';\r\n\r\nimport FSBase from '@/components/_old/FSBase.vue';\r\nimport { Sketch } from 'vue-color';\r\n\r\n@Component({\r\n  components: {\r\n    Sketch,\r\n  }\r\n})\r\nexport default class FSMenu extends FSBase {\r\n  @Prop({default: false}) private menuOpen !: boolean;\r\n\r\n  @Watch('menuOpen')\r\n  onMenuOpen(v: boolean){\r\n    if(!v){\r\n      this.passThrough = false;\r\n    }\r\n  }\r\n\r\n  private passThrough = false;\r\n  private colors = '#F00';\r\n\r\n  $refs !: {\r\n    menu: HTMLElement;\r\n  };\r\n\r\n  private colorUpdate(e: object){\r\n    EventBus.$emit('colorUpdate', e);\r\n  }\r\n\r\n  mounted(){\r\n    const menu = this.$refs.menu;\r\n\r\n    menu.addEventListener('contextmenu', (e) => {\r\n      this.passThrough = !this.passThrough;\r\n      e.preventDefault();\r\n    })\r\n    //\r\n  }\r\n}\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FSMenu.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FSMenu.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./FSMenu.vue?vue&type=template&id=44c656fe&scoped=true&\"\nimport script from \"./FSMenu.vue?vue&type=script&lang=ts&\"\nexport * from \"./FSMenu.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./FSMenu.vue?vue&type=style&index=0&id=44c656fe&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"44c656fe\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue } from 'vue-property-decorator';\nimport EventBus from '@/EventBus';\n\n// -- TODO REFACTOR --\nimport FSPoint from '@/intern/_old/FSPoint';\nimport FSObject from '@/intern/_old/FSObject';\n\nimport FSDebug from '@/components/FSDebug.vue';\nimport FSEvent from '@/components/FSEvent.vue';\nimport FSCursor from '@/components/FSCursor.vue';\n\nimport FSCanvasWebGL from '@/components/canvas/FSCanvasWebGL.vue';\nimport FS2DCanvas from '@/components/_old/FS2DCanvas.vue';\n\nimport FSMenu from '@/components/menu/FSMenu.vue';\n\n// import FSBase from '@/components/FSBase.vue';\nimport FSBase from '@/components/_old/FSBase.vue';\n\n@Component({\n  components: {\n    FSDebug,\n    FSEvent,\n    FSCursor,\n    FSCanvasWebGL,\n    FS2DCanvas,\n    FSMenu,\n    FSBase,\n    // FSChild\n  },\n})\nexport default class App extends Vue {\n\n  private debug = false;\n  private menu = new FSObject();\n  private menuOpen = false;\n\n  private renderCan !: HTMLCanvasElement;\n\n  private clearLayer(){\n    const can = this.$refs.canvas as FSCanvasWebGL;\n    can.clear();\n  }\n\n  /*== TODO: Seperate this into save module. */\n  private setTransparentToColor(img, color = 255){\n    for(let i = 0; i <= img.data.length; i+=4){\n      if(img.data[i+3] < 255){\n        img.data[i+0] = 255;\n        img.data[i+1] = 255;\n        img.data[i+2] = 255;\n        img.data[i+3] = 255;\n      }\n    }\n\n    this.renderCan!.getContext('2d').putImageData(img, 0, 0);\n  }\n\n  private setURL(){\n    const url = this.renderCan.toDataURL('image/png');\n    let fURL;\n    fetch(url)\n    .then(res => res.blob())\n    .then( blob => {\n      fURL = URL.createObjectURL(blob);\n      window.open(fURL)\n    });\n  }\n\n  private saveIMG(){\n    const can = this.$refs.canvas as FSCanvasWebGL;\n    const ctx = can.$refs.can[0];\n    const w = this.renderCan.width;\n    const h = this.renderCan.height;\n    const img = ctx.getContext('2d').getImageData(0, 0, w, h);\n    // this.setTransparentToColor(img);\n    this.renderCan!.getContext('2d').putImageData(img, 0, 0);\n    this.setURL();\n  }\n  /* == */\n\n  mounted(){\n    //TODO: GET RID\n    this.renderCan = this.$refs.render as HTMLCanvasElement;\n    this.renderCan.width = window.innerWidth;\n    this.renderCan.height = window.innerHeight;\n    //\n\n    this.debug = EventBus.debug;\n    this.menu = new FSObject({\n      xy: new FSPoint(window.innerWidth/2, window.innerHeight- 25),\n      wh: new FSPoint(80, 20)\n    });\n\n    // Todo a lot of this functionality should live in the menu.\n    EventBus.$on('context', (e) => {\n      if(this.menuOpen){\n        this.menu.wh = new FSPoint(80, 20);\n        this.menu.xy = new FSPoint(window.innerWidth/2, window.innerHeight- 25);\n      }else{\n        this.menu.wh = new FSPoint(200, 200);\n        this.menu.xy = new FSPoint(e.offsetX + 50, e.offsetY - 100);\n      }\n      this.menuOpen = !this.menuOpen;\n    });\n  }\n\n\n}\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--14-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--14-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--14-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--14-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=334425de&\"\nimport script from \"./App.vue?vue&type=script&lang=ts&\"\nexport * from \"./App.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue'\r\nimport App from './App.vue'\r\n\r\nVue.config.productionTip = false\r\n\r\nnew Vue({\r\n  render: h => h(App),\r\n}).$mount('#app')\r\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FSBase.vue?vue&type=style&index=0&id=36dad8c0&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FSBase.vue?vue&type=style&index=0&id=36dad8c0&scoped=true&lang=css&\""],"sourceRoot":""}